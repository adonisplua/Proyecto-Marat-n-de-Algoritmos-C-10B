#include <iostream>
#include <vector>
#include <string>
using namespace std;

int countWays(string symbols, string operators){
    int n=symbols.size();
    vector<vector<int>> T(n, vector<int>(n,0));
    vector<vector<int>> F(n, vector<int>(n,0));
    for(int i=0;i<n;i++)
        T[i][i]=(symbols[i]=='T'), F[i][i]=(symbols[i]=='F');
    for(int gap=1;gap<n;gap++)
        for(int i=0,j=gap;j<n;i++,j++)
            for(int g=0;g<gap;g++){
                int k=i+g;
                char op=operators[k];
                int tik=T[i][k]+F[i][k];
                int tkj=T[k+1][j]+F[k+1][j];
                if(op=='&'){
                    T[i][j]+=T[i][k]*T[k+1][j];
                    F[i][j]+=tik*tkj-T[i][k]*T[k+1][j];
                }
                else if(op=='|'){
                    F[i][j]+=F[i][k]*F[k+1][j];
                    T[i][j]+=tik*tkj-F[i][k]*F[k+1][j];
                }
                else if(op=='^'){
                    T[i][j]+=T[i][k]*F[k+1][j]+F[i][k]*T[k+1][j];
                    F[i][j]+=T[i][k]*T[k+1][j]+F[i][k]*F[k+1][j];
                }
            }
    return T[0][n-1];
}

int main(){
    string symbols="TFT";
    string operators="^&";
    cout<<"NÃºmero de formas verdaderas: "<<countWays(symbols,operators)<<endl;
    return 0;
}
