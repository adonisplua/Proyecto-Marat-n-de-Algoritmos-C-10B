#include <bits/stdc++.h>
using namespace std;
struct SegTree{
    int n; vector<int> t;
    SegTree(int size){ n=size; t.assign(2*n,0); }
    void build(vector<int>& a){ 
        for(int i=0;i<n;i++) t[i+n]=a[i]; 
        for(int i=n-1;i>0;i--) t[i]=t[i<<1]+t[i<<1|1]; 
    }
    void update(int p,int val){ 
        p+=n; t[p]=val; 
        for(p/=2;p>0;p/=2) t[p]=t[p<<1]+t[p<<1|1]; 
    }
    int query(int l,int r){ 
        int res=0; l+=n; r+=n; 
        while(l<r){
            if(l&1) res+=t[l++];
            if(r&1) res+=t[--r];
            l/=2; r/=2;
        }
        return res;
    }
};
int main(){
    vector<int> a={1,2,3,4,5};
    SegTree st(a.size());
    st.build(a);
    cout << st.query(1,4) << "\n"; // 2+3+4=9
}
